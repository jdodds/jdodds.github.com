
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Exhortatory</title>
  <meta name="author" content="Jeremiah Dodds">

  
  <meta name="description" content="Sunday 2012-09-16 at 12:13 PM DIY Everything Every once in a while I hear people talking about how they&#8217;d like to have some
useful product, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jdodds.github.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Exhortatory" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33990964-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Exhortatory</a></h1>
  
    <h2>0x23 0x21</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jdodds.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-09-16T12:13:00-04:00" pubdate data-updated="true">Sunday 2012-09-16 at 12:13 PM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/09/16/diy-everything/">DIY Everything</a></h1>
    
  </header>


  <div class="entry-content"><p>Every once in a while I hear people talking about how they&#8217;d like to have some
useful product, but can&#8217;t afford it. Sometimes they complain about how they
can&#8217;t afford it. Sometimes, very rarely, this is legitimate.</p>

<p>We live in a time where the knowledge necessary to do almost anything is at our
fingertips. Can&#8217;t afford new shelves? They&#8217;re easy to rig up &#8211; even some rope,
eyelet screws, and wood will do the trick if it needs to.</p>

<p>Can&#8217;t afford a projector? If you can get your hands on a transparency projector
from a school that&#8217;s getting rid of them, or from
<a href="http://www.freecycle.org/">freecycle</a> or
<a href="http://www.craigslist.org">craigslist</a> or similar, you can get a LED screen
with a busted backlight off of <a href="http://www.ebay.com">ebay</a> for very cheap and
have yourself a functioning projector in little time.</p>

<p>People seem to make the assumption that they <strong>aren&#8217;t capable</strong> of doing things
themselves, and the reasons that people do that are myriad. I&#8217;m of the opinion
that a lot of it stems from people being surrounded from birth by a culture that
promotes consumerism as solution, but that&#8217;s a can of worms that would be a
better fit for another post.</p>

<p>Making your own stuff is incredibly rewarding. We&#8217;re a species that depends on
pattern-matching for survival, doing things makes us better at doing
things. Anytime you try to acquire a new skill, there will be a period of
frustration at the beginning before things &#8220;click&#8221;. It&#8217;s often touted that ten
thousand hours of practice at something will make someone a master at that, and
the few actual attempts at that have had great results. It takes much, much less
time to gain a basic level of competence.</p>

<p>As an example, I taught myself to juggle a few years ago. It took three days of
practice for me to be able to do the most basic three-ball cascade. Once I got
that down, it became much easier to start learning more complex tricks, and
although I haven&#8217;t been practicing regularly for a while now, I can still throw
a three-ball cascade with ease.</p>

<p>The point of all this is that if you wish you had something, sit down, figure
out a way that could potentially provide that something, and then create
it. Rinse, repeat.</p>

<p>It&#8217;s the most empowering thing I know of, and it&#8217;s never been easier to be
empowered. We can do amazing things, humanity. We&#8217;ve done amazing things. Let&#8217;s
do more.</p>
</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/09/16/diy-everything/#disqus_thread">Comments</a>
    
  
  </p>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-09-10T17:43:00-04:00" pubdate data-updated="true">Monday 2012-09-10 at  5:43 PM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/09/10/tecs-boolean-logic-1-dot-1-background/">Tecs - Boolean Logic 1.1: Background</a></h1>
    
  </header>


  <div class="entry-content"><p>This is part of a series of posts going through
<a href="http://www1.idc.ac.il/tecs/">The Elements of Computing Systems</a>. This post
covers the background section of the first chapter, which is about Boolean
Logic.</p>

</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/09/10/tecs-boolean-logic-1-dot-1-background/#disqus_thread">Comments</a>
    
  
  </p>
  
    <footer>
      <a rel="full-article" href="/blog/2012/09/10/tecs-boolean-logic-1-dot-1-background/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-09-03T11:29:00-04:00" pubdate data-updated="true">Monday 2012-09-03 at 11:29 AM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/09/03/tecs-introduction/">TECS: Introduction</a></h1>
    
  </header>


  <div class="entry-content"><p>This starts a series of posts that will follow my progress while reading
<a href="http://www1.idc.ac.il/tecs/">The Elements of Computing Systems</a>, which so far
seems like a very excellent book. I&#8217;ll be taking notes as I go along and doing
the exercises.</p>

<p>I&#8217;m posting these partially as a motivator for myself to finish the book in
entirety, and just in case someone finds them useful.</p>

<p>Anyhow, on to the start of the runthrough. This post just covers the
introductory material.</p>

</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/09/03/tecs-introduction/#disqus_thread">Comments</a>
    
  
  </p>
  
    <footer>
      <a rel="full-article" href="/blog/2012/09/03/tecs-introduction/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-09-03T09:39:00-04:00" pubdate data-updated="true">Monday 2012-09-03 at  9:39 AM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/09/03/a-more-in-depth-look-at-how-what-im-trying-to-do-is-different/">A More In-depth Look at How What I&#8217;m Trying to Do Is Different</a></h1>
    
  </header>


  <div class="entry-content"><p>A few days ago, I posted a link to <a href="http://www.reddit.com">reddit</a> about the
<a href="http://www.indiegogo.com/customized-linux">&#8220;Customized Linux&#8221; project I&#8217;m trying to get funded</a>. It
generated
<a href="http://www.reddit.com/r/linux/comments/yx86b/im_trying_to_make_it_easy_for_people_to_generate/">quite a bit of discussion</a>,
which you are, of course, free to read through if you&#8217;re so inclined.</p>

<p>One thing that became clear was that I <strong>really</strong> needed to clarify just what
exactly it is that I want this project to be and why the existing tools that let
people customize Linux ISOs don&#8217;t cut it. I posted
<a href="http://jdodds.github.com/blog/2012/08/27/the-difference-between-my-custom-linux-project-and-existing-tools/">a short attempt at clarification</a>,
but for one it still wasn&#8217;t clear at the level that it needed to be, and for two
I didn&#8217;t even really get a very solid phrasing of the idea in my head until
a few hours after I had posted it.</p>

<p>I&#8217;m hoping that this post will provide a clear and understandable overview of
what I&#8217;d like to accomplish. We&#8217;ll start by taking a look at what the problems
I&#8217;d like to solve are, and then take a look at why existing tools that have
similar functionality aren&#8217;t solving those problems. We&#8217;ll wrap up with a bit of
exposition on how we can go about creating good solutions for those problems.</p>

</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/09/03/a-more-in-depth-look-at-how-what-im-trying-to-do-is-different/#disqus_thread">Comments</a>
    
  
  </p>
  
    <footer>
      <a rel="full-article" href="/blog/2012/09/03/a-more-in-depth-look-at-how-what-im-trying-to-do-is-different/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-08-27T20:14:00-04:00" pubdate data-updated="true">Monday 2012-08-27 at  8:14 PM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/08/27/the-difference-between-my-custom-linux-project-and-existing-tools/">The Difference Between My Custom Linux Project and Existing Tools</a></h1>
    
  </header>


  <div class="entry-content"><p>From a small bit of discussion on
<a href="http://news.ycombinator.com/item?id=4440894">Hacker News</a> and
<a href="http://www.reddit.com/r/linux/comments/yx86b/im_trying_to_make_it_easy_for_people_to_generate/">reddit</a>,
I thought it would be a good idea to extrapolate a bit on what the differences
are between what I&#8217;m trying to do with my project for
<a href="http://www.indiegogo.com/customized-linux?a=1092744">generating custom linux images</a>
and existing tools like <a href="http://susestudio.com/">SUSE Studio</a> and
<a href="http://puppylinux.org/wikka/woof">woof</a>. In short, what I&#8217;m trying to build has
a very focused scope, and aims to provide a service to people who may not even
know basic things about Linux.</p>

<p>The project I&#8217;m trying to launch has a much more limited scope than a tool like
SUSE Studio &#8211; I&#8217;m trying to focus on making it easy for individual users to
have access to the setup they use on a daily basis, on their personal
machines. SUSE Studio is a well-polished tool, but puts a lot of stuff in your
face by default that the type of user I&#8217;m targeting might not know the first
thing about.</p>

<p>The focus, interface-wise, in my tool is going to be on applications and user
data. While I do plan on allowing people to tweak things at as fine-grained of a
level as they want to, I really want to avoid overwhelming less-technical users
with the potential complexity of everything that can go into a distro.</p>

<p>Tools like woof and other existing scripts for generating ISOs require a fair
amount of knowledge from the end-user. I want to provide something that allows
people to spec everything out if they want to, but will by default provide them
with the software they use in a live environment, and after a fresh install,
even if they are close to entirely ignorant of what&#8217;s going on. This includes
doing things like providing a sane partitioning scheme by default, making sure
that the live and installed environments are the same in the ways that matter,
and setting things up in such a way that it&#8217;s possible for people to create the
environment they want <strong>even if they don&#8217;t even know what a package manager is</strong></p>

<p>I&#8217;m trying to build something that&#8217;s usable by people who aren&#8217;t even close to
being Linux gurus. Ideally, I&#8217;m trying to build something that&#8217;s usable by
people who don&#8217;t know the difference between a web-browser and a bootloader.</p>
</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/08/27/the-difference-between-my-custom-linux-project-and-existing-tools/#disqus_thread">Comments</a>
    
  
  </p>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-08-23T04:47:00-04:00" pubdate data-updated="true">Thursday 2012-08-23 at  4:47 AM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/08/23/kickstarters-appeal-process/">Kickstarter&#8217;s Appeal Process</a></h1>
    
  </header>


  <div class="entry-content"><p>One of the reasons that I decided to attempt to maintain
<a href="https://github.com/jdodds/aif">aif</a> was because it&#8217;s very relevant to something
I&#8217;ve wanted to do for a long time &#8211; make it easy to create customized Linux
live and install images that have the setup you want available in the live
environment and immediately after a fresh install.</p>

<p>While I&#8217;m capable of accomplishing that from a technical standpoint, I can&#8217;t
currently afford much of anything, let alone the hosting costs associated with
creating and serving install images &#8211; it&#8217;s intensive in terms of CPU use,
memory, and network usage.</p>

<p>I decided to try to start a <a href="http://www.kickstarter.com/">kickstarter</a> for
funding the project. I spent a good amount of time reviewing their project
guidelines, and figuring out how to take a decent video of both myself talking,
and of a proof-of-concept app doing it&#8217;s thing. When I went to submit it for
review, I had sent out a preview link to quite a few people, and gotten nothing
but positive feedback.</p>

<p>To my surprise, my submission was declined, and the reason given was what looked
like a simple form letter saying that I wasn&#8217;t within their project
guidelines. Kickstarter allows you to appeal for re-approval, which I did, but
they only allow you 500 <em>characters</em> with which to do so, a bit on the short end
if you don&#8217;t provide any feedback as to why a submission is declined.</p>

<p>After submitting the appeal, I received the same form letter back. Exactly the
same.</p>

<p>It&#8217;s a bit aggravating &#8211; I can see how my project would have not been
considered the type of thing that kickstarter is for, but if I was being denied
on a whim, I would have preferred that to be stated explicitly. As it is, it&#8217;s
not hard at all to browse through successfully funded projects that are either
in blatant violation of one of their &#8220;project guidelines&#8221;, or that are at least
as interpretable as such as mine was.</p>

<p>Back in 2011, <a href="http://www.kalzumeus.com/">Patrick McKenzie</a> gave a talk at
Google called
<a href="http://www.youtube.com/watch?v=sFWlmEO6eg0&amp;list=UUtXKDgv1AVoG88PLl8nGXmw">What Engineers Don&#8217;t Know We Don&#8217;t Know About Online Marketing</a>,
where he brought up how incredibly bad the support from Google was when
someone&#8217;s AdWords account would be suspended, and how it was really, <em>really</em> in
their best interests to do something about that. I hope Kickstarter starts
providing more (or any) feedback to people they deny submissions from at some
point, but I suppose we&#8217;ll just have to wait and see.</p>

<p>In any case, I&#8217;ve since taken what would have been my kickstarter campaign, and
started it at <a href="http://www.indiegogo.com/customized-linux">indiegogo</a>. Take a
look at it if you&#8217;re so inclined, or show it to your neckbeard friends. I&#8217;d
really like to bring the idea to fruition.</p>
</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/08/23/kickstarters-appeal-process/#disqus_thread">Comments</a>
    
  
  </p>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-08-09T04:17:00-04:00" pubdate data-updated="true">Thursday 2012-08-09 at  4:17 AM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/08/09/setting-up-a-development-environment-for-aif/">Setting Up a Development Environment for AIF</a></h1>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve spent the last couple of days setting up a development environment for
working on AIF. In this post, I&#8217;m going to walk you through the setup I came up
with. If you have any suggestions, please let me know &#8211; some of this involves
stuff that I&#8217;m not incredibly well-versed in.</p>

<h2>Prerequisites</h2>

<p>First off, I&#8217;m assuming you&#8217;re working on a machine running
<a href="http://archlinux.org">arch</a>. You&#8217;ll also need a copy of the
<a href="http://www.archlinux.org/download/">latest install media</a> and
<a href="http://git-scm.com/">git</a>, if you don&#8217;t already have that installed.</p>

<p>You&#8217;ll need to have a local checkout of both AIF and libui-sh, a dependency of
AIF:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone https://github.com/jdodds/aif
</span><span class='line'>$ git clone https://github.com/Dieterbe/libui-sh</span></code></pre></td></tr></table></div></figure>


<h2>Setting Up a VM</h2>

<p>I&#8217;m using <a href="http://wiki.qemu.org/Main_Page">qemu</a>. As far as I can tell, you
should too. The setup required is quite a bit more involved than the setup
for (for example) <a href="http://www.virtualbox.org">virtualbox</a>, but it&#8217;s a much more
suited tool for what we need to do.</p>

<p>Install qemu:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># pacman -S qemu</span></code></pre></td></tr></table></div></figure>


<p>The first thing you&#8217;ll need to do is create a disk image for qemu to use:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>qemu-img create -f qcow2 ~/vms/aif-testing/base.qcow2 8G</span></code></pre></td></tr></table></div></figure>


<p>If your machine supports <a href="http://www.linux-kvm.org/page/Main_Page">kvm</a>, you&#8217;ll
want to load both the <code>kvm</code> and either the <code>kvm-intel</code> or <code>kvm-amd</code> kernel
modules:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># modprobe kvm && modprobe kvm-intel</span></code></pre></td></tr></table></div></figure>


<p>You&#8217;ll probably want to stick those in <code>MODULES</code> in <code>/etc/rc.conf</code>. You&#8217;ll also
want to add yourself to the <code>kvm</code> group:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># usermod -a -G kvm $USERNAME</span></code></pre></td></tr></table></div></figure>


<p>And then either re-login or run <code>su -</code> in your terminal emulator of choice.</p>

<p>Now we should be able to start arch in our vm. I use a simple script:</p>

<figure class='code'><figcaption><span> (vm-aif)</span> <a href='/downloads/code/vm-aif'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env sh</span>
</span><span class='line'>
</span><span class='line'>qemu-system-x86_64 <span class="se">\</span>
</span><span class='line'>    -enable-kvm <span class="se">\</span>
</span><span class='line'>    -cdrom ~/isos/archlinux-2012.08.04-dual.iso <span class="se">\</span>
</span><span class='line'>    -boot <span class="nv">order</span><span class="o">=</span>d <span class="se">\</span>
</span><span class='line'>    -daemonize <span class="se">\</span>
</span><span class='line'>    -m 2G <span class="se">\</span>
</span><span class='line'>    -k en-us <span class="se">\</span>
</span><span class='line'>    ~/vms/aif-testing/base.qcow2
</span></code></pre></td></tr></table></div></figure>


<p>Stick the above somewhere in <code>$PATH</code> and run it, and you should see something
like this:</p>

<p><img src="/images/arch-live-splash.png"></p>

<p>Press <code>Ctrl-Alt-Shift-2</code> to get to qemu&#8217;s &#8220;monitor&#8221;. You can do a lot of stuff
from here, but for now you should at least know that:</p>

<ul>
<li><code>quit</code> quits</li>
<li><code>savevm foo</code> creates a snapshot named foo</li>
<li><code>loadvm foo</code> loads the snapshot named foo</li>
<li><code>info snapshots</code> shows information about snapshots</li>
</ul>


<p>Press <code>Ctrl-Alt-Shift-1</code> to get back to the boot screen, and boot. Once you&#8217;re
in, your host machine is available to the vm as <code>10.0.2.2</code>.</p>

<h2>git-daemon</h2>

<p>There are a few ways you could make your working copy of AIF and libui-sh
available to your vm, <code>git-daemon</code> is what I went with. If you have git
installed from arch&#8217;s repos, you should already have it.</p>

<p>I have all the code I actively work on under <code>$HOME/workspace</code>. If you use a
similar setup, modify <code>/etc/conf.d/git-daemon.conf</code> to look something like:</p>

<figure class='code'><figcaption><span> (git-daemon.conf)</span> <a href='/downloads/code/git-daemon.conf'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># path to git repositories served</span>
</span><span class='line'><span class="c"># GIT_REPO=&quot;/srv/git/&quot;</span>
</span><span class='line'><span class="c"># see `man git-daemon` for all available options</span>
</span><span class='line'><span class="c"># $GIT_REPO will be present twice in most configs</span>
</span><span class='line'><span class="nv">GIT_DAEMON_ARGS</span><span class="o">=</span><span class="s2">&quot;--detach --syslog --verbose --user-path&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>--user-path</code> option allows us to clone from the vm easily later.</p>

<p>Now, start up <code>git-daemon</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># rc.d start git-daemon</span></code></pre></td></tr></table></div></figure>


<p>And then over in your vm, you need to get some basics set up:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># pacman -Sy git binutils dialog make
</span><span class='line'># git clone git://10.0.2.2/~$USERNAME/path/to/aif
</span><span class='line'># git clone git://10.0.2.2/~$USERNME/path/to/libui-sh
</span><span class='line'># cd libui-sh && git checkout -t develop && make install && cd -
</span><span class='line'># cd aif && git checkout -t develop</span></code></pre></td></tr></table></div></figure>


<h3>Take a Snaphot</h3>

<p>At this point, you&#8217;re pretty well set-up in your vm. Switch over to the monitor,
and use <code>savevm</code> to create a snapshot that you can reload later with <code>loadvm</code>.</p>

<h2>Sharing Packages With Your Host Machine</h2>

<p>I ended up using <a href="http://xyne.archlinux.ca/projects/pacserve">pacserve</a> to do
this. Here&#8217;s my <code>/etc/conf.d/pacserved</code>:</p>

<figure class='code'><figcaption><span> (pacserved)</span> <a href='/downloads/code/pacserved'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># Use this array to pass additional arguments to the Pacserve daemon, e.g.</span>
</span><span class='line'><span class="c"># PACSERVED_ARGS=(--multicast --log /var/log/pacserve/pacserve.log)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># See &quot;pacserve --help&quot; for more information.</span>
</span><span class='line'>
</span><span class='line'><span class="c"># The following options are used by the daemon and must not be included in the</span>
</span><span class='line'><span class="c"># array:</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># --daemon</span>
</span><span class='line'><span class="c"># --pid-file</span>
</span><span class='line'><span class="c"># --su</span>
</span><span class='line'>
</span><span class='line'><span class="nv">PACSERVED_ARGS</span><span class="o">=(</span>--daemon --log /tmp/pacserve.log<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;m now considering just mounting the host machine&#8217;s <code>/var/cache/pacman</code> via nfs
or similar, but the code in the experimental branch of AIF assumes the above,
and it works pretty well.</p>

<p>At this point you could <code>loadvm</code> if you need to and:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># make install # assuming you're in the aif checkout on the vm
</span><span class='line'># aif -p automatic -c unofficial/jdd-generic-install-sda-using-host-packages</span></code></pre></td></tr></table></div></figure>


<p>And everything should work. You should be able to reboot into a working arch
system. In fact, if you do this and it doesn&#8217;t work, please let me know.</p>

<h2>(optional) Making AIF Available as a Package on the vm</h2>

<p>This is really only necessary for using or working on<code>aif-test</code>, and is by far
the area where I&#8217;m the least sure of whether I&#8217;m doing stuff right. In the
&#8220;experimental&#8221; branch, there are two PKGBUILD templates in
<code>unofficial/pkgbuild-templates</code>. Here&#8217;s a rundown of what you need to do:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># cd
</span><span class='line'># mkdir -p packages/{aif,libui-sh}
</span><span class='line'># cp aif/unofficial/pkgbuild-templates/PKGBUILD.aif packages/aif/PKGBUILD
</span><span class='line'># cp aif/unofficial/pkgbuild-templates/PKGBUILD.libui-sh packages/libui-sh/PKGBUILD</span></code></pre></td></tr></table></div></figure>


<p>Now, edit the two PKGBUILDS, and set <code>_gitroot</code> to an appropriate value. This
should be the only required edit.</p>

<p>Next:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># cd packages/libui-sh && makepkg --asroot && cd -
</span><span class='line'># cd packages/aif && makepkg --asroot --nodeps && cd -
</span><span class='line'># mkdir repo
</span><span class='line'># repo-add repo/aif.db.tar.gz \
</span><span class='line'>#   packages/libui-sh/libui-sh*.pkg.tar.gz packages/aif/aif*.pkg.tar.gz
</span><span class='line'># cp packages/{libui-sh,aif}/*pkg.tar.gz repo/</span></code></pre></td></tr></table></div></figure>


<p>And now the <code>aif-test</code> scripts should run, and make use of your host&#8217;s
packages. As far as I know, none of them are actually <em>working</em> entirely, and
this entire step is only actually necessary if AIF is a dependency on the vm
after the install finishes in order for <code>aif-test</code> to finish. I haven&#8217;t read
enough of it to know quite yet.</p>

<p>It would also be unnecessary if AIF and libui-sh were still available in the
repos. I don&#8217;t particularly like the PKGBUILD-template idea, even though it
works. If this actually is necessary right now, hopefully it won&#8217;t be for long.</p>

<h2>Basic Development Workflow</h2>

<ul>
<li>Work on your host machine</li>
<li><code>loadvm</code> in qemu monitor</li>
<li><code>git pull</code></li>
<li><code>make install</code></li>
<li>run the part of aif you want to test</li>
</ul>


<h2>Conclusion</h2>

<p>Well, that was a lot of setup, but it also helps keep the feedback loop short,
which is nice. If you&#8217;ve got any suggestions, I&#8217;d love to hear them!</p>

<h2>Updates</h2>

<ul>
<li>Updated on Mon Aug 13 10:05:47 EDT 2012 to fix typo pointed out by Mr Green.</li>
<li>Updated on Mon Aug 13 14:27:49 EDT 2012 to fix erroneous groupadd command
pointed out by Mr Green.</li>
</ul>

</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/08/09/setting-up-a-development-environment-for-aif/#disqus_thread">Comments</a>
    
  
  </p>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-08-08T23:05:00-04:00" pubdate data-updated="true">Wednesday 2012-08-08 at 11:05 PM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/08/08/taking-over-development-of-aif/">Taking Over Development of AIF</a></h1>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/Dieterbe">Deiter Plaetinck</a> recently handed
<a href="https://github.com/jdodds/aif">AIF</a>, the <a href="http://archlinux.org">Arch Linux</a>
Installation Framework over to me, I&#8217;m pretty excited about it.</p>

<p>There&#8217;s a lot of work that needs to be done &#8211; AIF is currently fairly
broken. I&#8217;m aiming to fix that, and it looks like some major restructuring will
be in order. There are some other popular installation tools around &#8211;
<a href="http://projects.archlinux.org/archboot.git/">Archboot</a>, and the current tools on
the install disks,
<a href="https://github.com/falconindy/arch-install-scripts">arch install scripts</a>. There
is also work being done on a
<a href="https://github.com/bwrsandman/pyaif">port to python</a>, which I&#8217;m keeping an eye
on.</p>

<p>So far, I have support for <code>grub-bios</code> and <code>syslinux</code> working as bootloaders. I
recently spent a couple of days setting up a development environment for making
testing AIF less of a pain, there will be a post describing that coming soon.</p>

<p>I&#8217;m interested in continuing work on AIF for a few reasons. For one, it&#8217;s really
a pretty nice tool. The ideas that it&#8217;s trying to implement are, at the core,
pretty solid in my opinion. It was also the default installation tool for arch
for quite some time, and people seem to miss it. In addition, I&#8217;ve been wanting
to start contributing back to the arch community for a little while, and I
happen to be working on some tools for making generation of customized Linux
install and live images easy that are partially built on top of AIF.</p>

<p>If you&#8217;d like to help out, patches, advice, and feedback are always welcome.</p>
</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/08/08/taking-over-development-of-aif/#disqus_thread">Comments</a>
    
  
  </p>
  


    </article>
  
  
    <article>
      
  <header>
    
      








  


<time datetime="2012-08-08T20:40:00-04:00" pubdate data-updated="true">Wednesday 2012-08-08 at  8:40 PM</time>
    
    
      <h1 class="entry-title"><a href="/blog/2012/08/08/first-post/">First Post</a></h1>
    
  </header>


  <div class="entry-content"><p>For the first time in a while, I&#8217;m feeling the urge to start writing about the
tech stuff that I do. This seems like a good platform for doing that with, we&#8217;ll
see how it goes.</p>
</div>
  
  
  <p class="meta">
    
    <a href="/blog/2012/08/08/first-post/#disqus_thread">Comments</a>
    
  
  </p>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  <h2>Everyone Should Have Access to Their Setup</h2>
  <iframe src="http://www.indiegogo.com/project/212585/widget/1092744"
          width="224px"
          height="429px"
          frameborder="0"
          scrolling="no">
  </iframe>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/09/16/diy-everything/">DIY Everything</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/10/tecs-boolean-logic-1-dot-1-background/">tecs - boolean logic 1.1: background</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/03/tecs-introduction/">TECS: Introduction</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/03/a-more-in-depth-look-at-how-what-im-trying-to-do-is-different/">a more in-depth look at how what I&#8217;m trying to do is different</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/27/the-difference-between-my-custom-linux-project-and-existing-tools/">The Difference Between My Custom Linux Project and Existing Tools</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("kaens", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/kaens" class="twitter-follow-button" data-show-count="false">Follow @kaens</a>
  
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Jeremiah Dodds -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'exhortatory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
